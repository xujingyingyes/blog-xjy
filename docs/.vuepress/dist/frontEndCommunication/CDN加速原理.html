<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>什么是 CDN | 前端仙女徐</title>
    <meta name="description" content="徐静莹同学的个人博客">
    <link rel="icon" href="/logo.ico">
    
    <link rel="preload" href="/assets/css/0.styles.4dce7a13.css" as="style"><link rel="preload" href="/assets/js/app.1f028c24.js" as="script"><link rel="preload" href="/assets/js/71.269a3a63.js" as="script"><link rel="prefetch" href="/assets/js/10.24407bf4.js"><link rel="prefetch" href="/assets/js/11.f65813c4.js"><link rel="prefetch" href="/assets/js/12.e2743211.js"><link rel="prefetch" href="/assets/js/13.51e96dc6.js"><link rel="prefetch" href="/assets/js/14.8a89fb0e.js"><link rel="prefetch" href="/assets/js/15.758b8a10.js"><link rel="prefetch" href="/assets/js/16.11d935b6.js"><link rel="prefetch" href="/assets/js/17.285d9c9b.js"><link rel="prefetch" href="/assets/js/18.83b4078c.js"><link rel="prefetch" href="/assets/js/19.93d4da41.js"><link rel="prefetch" href="/assets/js/2.0a431809.js"><link rel="prefetch" href="/assets/js/20.17e24dda.js"><link rel="prefetch" href="/assets/js/21.955d0fdc.js"><link rel="prefetch" href="/assets/js/22.fdf68e4b.js"><link rel="prefetch" href="/assets/js/23.1ed660e4.js"><link rel="prefetch" href="/assets/js/24.5b45c1a1.js"><link rel="prefetch" href="/assets/js/25.fe7b583d.js"><link rel="prefetch" href="/assets/js/26.f7689b2a.js"><link rel="prefetch" href="/assets/js/27.c8cdd1fa.js"><link rel="prefetch" href="/assets/js/28.e3f85d09.js"><link rel="prefetch" href="/assets/js/29.9a224698.js"><link rel="prefetch" href="/assets/js/3.7caebb6a.js"><link rel="prefetch" href="/assets/js/30.19fca434.js"><link rel="prefetch" href="/assets/js/31.55c9f26d.js"><link rel="prefetch" href="/assets/js/32.a9740a96.js"><link rel="prefetch" href="/assets/js/33.d7d71b95.js"><link rel="prefetch" href="/assets/js/34.d1bfe968.js"><link rel="prefetch" href="/assets/js/35.52bb1738.js"><link rel="prefetch" href="/assets/js/36.3479a41b.js"><link rel="prefetch" href="/assets/js/37.9a6c7e4f.js"><link rel="prefetch" href="/assets/js/38.7bf42e5e.js"><link rel="prefetch" href="/assets/js/39.0a81abf8.js"><link rel="prefetch" href="/assets/js/4.c5bc218a.js"><link rel="prefetch" href="/assets/js/40.976bff4e.js"><link rel="prefetch" href="/assets/js/41.4f6f4a83.js"><link rel="prefetch" href="/assets/js/42.9aba9318.js"><link rel="prefetch" href="/assets/js/43.60ceac77.js"><link rel="prefetch" href="/assets/js/44.278ef31a.js"><link rel="prefetch" href="/assets/js/45.3e5deb23.js"><link rel="prefetch" href="/assets/js/46.23d49a34.js"><link rel="prefetch" href="/assets/js/47.30f87932.js"><link rel="prefetch" href="/assets/js/48.172ea526.js"><link rel="prefetch" href="/assets/js/49.4c061c4c.js"><link rel="prefetch" href="/assets/js/5.fe0f5d42.js"><link rel="prefetch" href="/assets/js/50.f699d4a3.js"><link rel="prefetch" href="/assets/js/51.eca98ada.js"><link rel="prefetch" href="/assets/js/52.014accce.js"><link rel="prefetch" href="/assets/js/53.dffbf8a8.js"><link rel="prefetch" href="/assets/js/54.db3ba1c9.js"><link rel="prefetch" href="/assets/js/55.257ee8bc.js"><link rel="prefetch" href="/assets/js/56.28c48488.js"><link rel="prefetch" href="/assets/js/57.808513b5.js"><link rel="prefetch" href="/assets/js/58.9fbe36a9.js"><link rel="prefetch" href="/assets/js/59.846d62f9.js"><link rel="prefetch" href="/assets/js/6.883b6d57.js"><link rel="prefetch" href="/assets/js/60.6f234ef3.js"><link rel="prefetch" href="/assets/js/61.b8c8fbc1.js"><link rel="prefetch" href="/assets/js/62.e1e16f95.js"><link rel="prefetch" href="/assets/js/63.13ea049b.js"><link rel="prefetch" href="/assets/js/64.328214c6.js"><link rel="prefetch" href="/assets/js/65.0c09fa70.js"><link rel="prefetch" href="/assets/js/66.94da487a.js"><link rel="prefetch" href="/assets/js/67.40c3757b.js"><link rel="prefetch" href="/assets/js/68.120280dd.js"><link rel="prefetch" href="/assets/js/69.e9be13cf.js"><link rel="prefetch" href="/assets/js/7.9b205e8b.js"><link rel="prefetch" href="/assets/js/70.7084fe70.js"><link rel="prefetch" href="/assets/js/72.78a75323.js"><link rel="prefetch" href="/assets/js/73.572e533c.js"><link rel="prefetch" href="/assets/js/74.0204d2b9.js"><link rel="prefetch" href="/assets/js/75.771bc07b.js"><link rel="prefetch" href="/assets/js/76.08346a9a.js"><link rel="prefetch" href="/assets/js/77.c4260ca2.js"><link rel="prefetch" href="/assets/js/78.817495b2.js"><link rel="prefetch" href="/assets/js/79.38bfe515.js"><link rel="prefetch" href="/assets/js/8.d2591906.js"><link rel="prefetch" href="/assets/js/80.2152c03c.js"><link rel="prefetch" href="/assets/js/81.8336750e.js"><link rel="prefetch" href="/assets/js/82.1dcb7f58.js"><link rel="prefetch" href="/assets/js/83.c18d8f95.js"><link rel="prefetch" href="/assets/js/84.67716c06.js"><link rel="prefetch" href="/assets/js/85.20d56bc2.js"><link rel="prefetch" href="/assets/js/86.a81f543e.js"><link rel="prefetch" href="/assets/js/87.bf0958f6.js"><link rel="prefetch" href="/assets/js/88.416ba45a.js"><link rel="prefetch" href="/assets/js/89.efc3cf73.js"><link rel="prefetch" href="/assets/js/9.1e141e24.js"><link rel="prefetch" href="/assets/js/90.62469d05.js"><link rel="prefetch" href="/assets/js/91.fa3d65a2.js"><link rel="prefetch" href="/assets/js/92.cab3775b.js"><link rel="prefetch" href="/assets/js/93.9305424b.js"><link rel="prefetch" href="/assets/js/94.3eadaef6.js"><link rel="prefetch" href="/assets/js/95.be75c3c9.js"><link rel="prefetch" href="/assets/js/96.de5c62e1.js"><link rel="prefetch" href="/assets/js/97.831ce43c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4dce7a13.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端仙女徐</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/QDSkill/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/frame/" class="nav-link">框架</a></li><li class="dropdown-item"><!----> <a href="/frontEndCommunication/" class="nav-link router-link-active">前后端通信</a></li><li class="dropdown-item"><!----> <a href="/performanceOptimization/" class="nav-link">性能优化</a></li></ul></div></div><div class="nav-item"><a href="/dayThreeCode/" class="nav-link">每日三道题</a></div><div class="nav-item"><a href="/faceStorage/" class="nav-link">面经</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/QDSkill/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/frame/" class="nav-link">框架</a></li><li class="dropdown-item"><!----> <a href="/frontEndCommunication/" class="nav-link router-link-active">前后端通信</a></li><li class="dropdown-item"><!----> <a href="/performanceOptimization/" class="nav-link">性能优化</a></li></ul></div></div><div class="nav-item"><a href="/dayThreeCode/" class="nav-link">每日三道题</a></div><div class="nav-item"><a href="/faceStorage/" class="nav-link">面经</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>前后端通信</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/frontEndCommunication/nginx.html" class="sidebar-link">NGINX 入门教程</a></li><li><a href="/frontEndCommunication/HTTPS的握手过程.html" class="sidebar-link">HTTPS 握手过程</a></li><li><a href="/frontEndCommunication/HTTPS.html" class="sidebar-link">HTTP 为什么不安全</a></li><li><a href="/frontEndCommunication/HTTP版本.html" class="sidebar-link">HTTP 各版本</a></li><li><a href="/frontEndCommunication/HTTP状态码.html" class="sidebar-link">信息响应</a></li><li><a href="/frontEndCommunication/HTTP相关.html" class="sidebar-link">HTTP 协议相关</a></li><li><a href="/frontEndCommunication/HTTP报文.html" class="sidebar-link">HTTP 报文</a></li><li><a href="/frontEndCommunication/DNS服务器.html" class="sidebar-link">DNS 服务器</a></li><li><a href="/frontEndCommunication/Cookie的SameSite属性.html" class="sidebar-link">Cookie 的 SameSite 属性</a></li><li><a href="/frontEndCommunication/CDN加速原理.html" class="active sidebar-link">什么是 CDN</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontEndCommunication/CDN加速原理.html#传统访问过程" class="sidebar-link">传统访问过程</a></li><li class="sidebar-sub-header"><a href="/frontEndCommunication/CDN加速原理.html#cdn-访问过程" class="sidebar-link">CDN 访问过程</a></li><li class="sidebar-sub-header"><a href="/frontEndCommunication/CDN加速原理.html#组成要素" class="sidebar-link">组成要素</a></li><li class="sidebar-sub-header"><a href="/frontEndCommunication/CDN加速原理.html#cname记录（cname-record）" class="sidebar-link">CNAME记录（CNAME record）</a></li><li class="sidebar-sub-header"><a href="/frontEndCommunication/CDN加速原理.html#cname域名" class="sidebar-link">CNAME域名</a></li><li class="sidebar-sub-header"><a href="/frontEndCommunication/CDN加速原理.html#回源host" class="sidebar-link">回源host</a></li><li class="sidebar-sub-header"><a href="/frontEndCommunication/CDN加速原理.html#协议回源" class="sidebar-link">协议回源</a></li></ul></li><li><a href="/frontEndCommunication/网络协议.html" class="sidebar-link">网络协议</a></li><li><a href="/frontEndCommunication/网络传输过程.html" class="sidebar-link">生成 HTTP 请求消息</a></li><li><a href="/frontEndCommunication/三次握手四次挥手.html" class="sidebar-link">三次握手</a></li><li><a href="/frontEndCommunication/前后端鉴权.html" class="sidebar-link">引言</a></li><li><a href="/frontEndCommunication/零距离接触websocket.html" class="sidebar-link">零距离接触 WebSocket</a></li><li><a href="/frontEndCommunication/跨域.html" class="sidebar-link">前端通信</a></li><li><a href="/frontEndCommunication/对称加密和非对称加密.html" class="sidebar-link">对称加密</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="什么是-cdn"><a href="#什么是-cdn" class="header-anchor">#</a> 什么是 CDN</h1> <blockquote><p>CDN 全称是（Content Delivery NetWork，即内容分发网络。其目的是通过现有的 Internet 中增加一层新的缓存层，将网站的内容发布到最接近用户的网络 <strong>边缘</strong> 节点，使用户可以就近取得所需的内容，提高用户访问网站的响应速度。从技术上全面解决由于网络带宽小、用户访问量达、网点分布不均等问题，提高用户访问网站的响应速度。</p> <p>简单来说，CDN 的工作原理就是将您源站的资源缓存岛位于全球各地的 CDN 节点上，用户请求资源时，就近返回节点上缓存的资源，而不需要每个用户的请求都从您的源站获取，避免网络拥塞、缓解源站压力，保证用户访问资源的速度和体验。</p></blockquote> <p><img src="https://raw.githubusercontent.com/LaamGinghong/pics/master/img/20200901202459.jpg" alt></p> <p>CDN 对网络的优化作用主要体现在如下几个方面：</p> <ul><li>解决服务端的 <strong>第一公里</strong> 的问题</li> <li>缓解甚至消除不同运营商之间互联的瓶颈造成的影响</li> <li>减轻了各省的出口带宽压力</li> <li>缓解了骨干网的压力</li> <li>优化了网上热点内容</li></ul> <h1 id="工作原理"><a href="#工作原理" class="header-anchor">#</a> 工作原理</h1> <h2 id="传统访问过程"><a href="#传统访问过程" class="header-anchor">#</a> 传统访问过程</h2> <p><img src="https://raw.githubusercontent.com/LaamGinghong/pics/master/img/20200901202717.png" alt></p> <p>由上图可见，用户访问未使用 CDN 缓存网站的过程：</p> <ol><li>用户输入访问的域名，操作系统向 LocalDNS 查询域名的 IP 地址</li> <li>LocalDNS 向 Root DNS 查询域名的授权服务器（这里假设 LocalDNS 的缓存已过期）</li> <li>Root DNS 将域名授权 DNS 记录回应给 LocalDNS</li> <li>LocalDNS 得到域名授权的记录后，继续向域名授权 DNS 查询域名的 ip 地址</li> <li>LocalDNS 将得到的域名 ip 地址返回给客户端</li> <li>用户得到域名IP地址后，访问站点服务器</li> <li>站点服务器响应请求，将请求资源返回给客户端</li></ol> <h2 id="cdn-访问过程"><a href="#cdn-访问过程" class="header-anchor">#</a> CDN 访问过程</h2> <p><img src="https://raw.githubusercontent.com/LaamGinghong/pics/master/img/20200901203056.png" alt></p> <p>通过上图，我们可以了解到，使用了 CDN 缓存后的网站访问过程变更为：</p> <ol><li>用户输入访问的域名，操作系统向 LocalDNS 查询域名的IP地址</li> <li>LocalDNS 向 RootDNS 查询域名的授权服务器（这里假设缓存已过期）</li> <li>RootDNS 将域名授权 DNS 记录返回给 LocalDNS</li> <li>LocalDNS 得到域名的授权记录后，继续向域名授权 DNS 查询域名的IP地址</li> <li>域名授权DNS查询域名记录后（一般是CNAME），回应给 LocalDNS</li> <li>智能调度 DNS 根据一定的算法和策略（比如静态拓扑、容量等）将最合适的 CDN 节点IP地址回应给 LocalDNS</li> <li>LocalDNS 得到域名IP地址，返回给客户端</li> <li>客户端得到IP地址后发送请求访问站点服务器</li> <li>CDN 节点服务器应答请求，将内容返回给客户端</li></ol> <p>通过以上的分析，我们可以得到：为了实现对普通用户透明（使用缓存后用户无需进行任何设置）访问，需要使用 DNS（域名解析）来引导用户来访问 Cache 服务器，以实现透明的加速服务。由于用户访问网站的第一步就是域名解析，所以通过修改 DNS 来引导用户访问是最简单有效的方式。</p> <h2 id="组成要素"><a href="#组成要素" class="header-anchor">#</a> 组成要素</h2> <p>对于普通的互联网用户，每个 CDN 节点就相当于一个放置在他周围的网站服务器。通过对 DNS 的接管，用户的请求被透明的指向里他最近的节点，节点中的 CDN 服务器会想网站的原始服务器一样，响应用户的请求。由于它离用户最近，所以响应时间也是更快。</p> <p>从上面的图中我们可以得知虚线圈起来那块就是 CDN层，这层是位于用户端和站点服务器之间。</p> <ul><li><p>智能调度 DNS</p> <p>智能调度 DNS 是 CDN服务中的关键系统，当用户访问加入 CDN 服务的网站时，域名解析请求将最终由 <strong>智能调度 DNS</strong> 负责处理。它通过一组预先定义好的策略，将当时最接近用户的节点地址提供给用户，使用户可以得到快速的服务。同时它需要与分布在各地的 CDN 节点保持童心，跟踪个节点的健康状态、容量等信息，确保将用户的请求分配到就近可用的节点上。</p></li> <li><p>缓存功能服务</p> <p>负载均衡设备</p> <p>内容 Cache 服务器</p> <p>共享存储</p></li></ul> <h1 id="名词解释"><a href="#名词解释" class="header-anchor">#</a> 名词解释</h1> <h2 id="cname记录（cname-record）"><a href="#cname记录（cname-record）" class="header-anchor">#</a> CNAME记录（CNAME record）</h2> <p>CNAME 即别名（Canonical Name）；可以用来把一个域名解析成另一个域名，当 DNS 系统在查询 CNAME 左边的名称的时候，都会转向 CNAME 右边的名称在进行查询，一直最总到最后的 PTR 或 A名称，成功查询才会做出回应，否则失败。</p> <p>例如，你有一台服务器上存放了很多资料，你是用 <code>doc.example.com</code> 去访问这些资源，但又希望通过 <code>documents.example.com</code> 也能访问到这些资源，那么你就可以在你的 DNS 解析服务商添加一条 CNAME 记录，将 <code>documents.example.com</code> 指向 <code>doc.example.com</code> ，添加记录之后，所有访问 <code>documents.example.com</code> 的请求都会被转到 <code>doc.example.com</code> ，并得到相同的响应。</p> <h2 id="cname域名"><a href="#cname域名" class="header-anchor">#</a> CNAME域名</h2> <p>接入 CDN 时，在 CDN 提供商控制台添加完加速域名后，您会得到一个 CDN 给您分配的 CNAME域名，您需要在您的 DNS 解析服务上添加 CNAME 记录，将自己的加速域名指向这个 CNAME域名，这样该域名的请求才会指向 CDN 的节点，以达到加速效果。</p> <h2 id="回源host"><a href="#回源host" class="header-anchor">#</a> 回源host</h2> <p>回源host 决定回源请求访问到原站上的具体站点。</p> <blockquote><p>例子1：源站是域名源站为 <code>www.a.com</code> ，回源host为 <code>www.b.com</code> ，那么实际回源是请求到 <code>www.a.com</code> 解析到的IP，对应的主机上的站点 <code>www.b.com</code></p> <p>例子2：源站是IP源站为 <code>1.1.1.1</code>，回源host为 <code>www.b.com</code>，那么实际回源的是 <code>1.1.1.1</code> 对应的主机上的站点 <code>www.b.com</code></p></blockquote> <h2 id="协议回源"><a href="#协议回源" class="header-anchor">#</a> 协议回源</h2> <p>指回源时使用的协议和客户端访问资源时的协议保持一致，即如果客户端使用 HTTPS 方式请求资源，当CDN节点上未缓存该资源时，节点会使用相同的 HTTPS 方式回源获取资源；同理如果客户端使用 HTTP 协议的请求，CDN节点回源时也使用HTTP协议。</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.1f028c24.js" defer></script><script src="/assets/js/71.269a3a63.js" defer></script>
  </body>
</html>
